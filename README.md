# Financial Trecker

**Financial Trecker** ‚Äî —ç—Ç–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É—á—ë—Ç–∞ –ª–∏—á–Ω—ã—Ö —Ñ–∏–Ω–∞–Ω—Å–æ–≤. –ü—Ä–æ–µ–∫—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Å–æ–∑–¥–∞–≤–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –¥–æ–±–∞–≤–ª—è—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (–¥–æ—Ö–æ–¥—ã –∏ —Ä–∞—Å—Ö–æ–¥—ã), –ø–æ–ª—É—á–∞—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫—É, —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á—ë—Ç—ã –≤ CSV –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∏—Ö –ø–æ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç–µ.

---

## üöÄ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

* **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** —Å JWT (FastAPI + OAuth2).
* **CRUD –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π** –∏ **—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π** —Å –ø–µ—Ä–µ–¥–∞—á–µ–π –ø—Ä–∞–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
* **–û—Ç—á—ë—Ç—ã & –∞–Ω–∞–ª–∏—Ç–∏–∫–∞**:

  * –ë–∞–ª–∞–Ω—Å –Ω–∞ –ª—é–±—É—é –¥–∞—Ç—É.
  * –ú–µ—Å—è—á–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ (–¥–æ—Ö–æ–¥/—Ä–∞—Å—Ö–æ–¥).
  * –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º.
* **–≠–∫—Å–ø–æ—Ä—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ CSV**:

  * –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —ç–∫—Å–ø–æ—Ä—Ç —á–µ—Ä–µ–∑ HTTP.
  * –§–æ–Ω–æ–≤—ã–π —ç–∫—Å–ø–æ—Ä—Ç —Å Celery, Redis –∏ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –ø–∏—Å—å–º–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.
* **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Swagger** (FastAPI –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç `/docs`).
* **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** (FastAPI + Async SQLAlchemy).
* **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è**: Docker Compose –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –∏ —Ç–µ—Å—Ç–æ–≤.
* **–ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏** (pytest, pytest-asyncio, httpx).
* **CI/CD**: GitHub Actions –∑–∞–ø—É—Å–∫–∞–µ—Ç —Ç–µ—Å—Ç—ã –∏ –¥–µ–ø–ª–æ–π.

---

## üèó –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

* **Python 3.11**
* **FastAPI** ‚Äî –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
* **SQLAlchemy 2.0 (async)** –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å PostgreSQL
* **Alembic** ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏—è–º–∏ –ë–î
* **Pydantic** ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
* **Celery + Redis** ‚Äî —Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏
* **Docker & Docker Compose** ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
* **pytest, pytest-asyncio, httpx** ‚Äî —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
* **GitHub Actions** ‚Äî CI/CD

---

## üì• –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**

   ```bash
   git clone https://github.com/MrMrMops/Financial_trecker.git
   cd Financial_trecker
   ```

2. **–°–æ–∑–¥–∞–π—Ç–µ `.env`** –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–ø—Ä–∏–º–µ—Ä `.env.example`):

   ```properties
   DATABASE_URL=postgresql+asyncpg://user:password@db:5432/financial_trecker_db
   SYNC_DATABASE_URL=postgresql+psycopg2://user:password@db:5432/financial_trecker_db
   JWT_SECRET_KEY=your_secret_key
   ACCESS_TOKEN_EXPIRE_MINUTES=60
   MAIL_USERNAME=...
   MAIL_PASSWORD=...
   MAIL_FROM=...
   MAIL_SERVER=...
   MAIL_PORT=587
   CELERY_BROKER_URL=redis://redis:6379/0
   CELERY_RESULT_BACKEND=redis://redis:6379/1
   ```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ Docker Compose**

   ```bash
   docker-compose -f docker/docker-compose.yml up --build -d
   ```

4. **–ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏** (–µ—Å–ª–∏ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –≤ `entrypoint.sh`):

   ```bash
   docker-compose exec web alembic upgrade head
   ```

5. **–û—Ç–∫—Ä–æ–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é**

   * Swagger UI: `http://localhost:8000/docs`
   * Redoc: `http://localhost:8000/redoc`

---

üèõ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

1. FastAPI

–ü–æ—á–µ–º—É: –í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç–∏ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è OpenAPI/Swagger.

–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã: Flask (—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π), Django REST Framework (–±–æ–ª–µ–µ —Ç—è–∂–µ–ª–æ–≤–µ—Å–Ω—ã–π).

2. SQLAlchemy 2.0 + AsyncSession

–ü–æ—á–µ–º—É: –ú–æ—â–Ω—ã–π ORM —Å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º API, –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–∏—Å–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∏ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏.

–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã: Tortoise ORM (–ø—Ä–æ—â–µ, –Ω–æ –º–µ–Ω–µ–µ –≥–∏–±–∫–∏–π), raw SQL (–±–æ–ª—å—à–µ —à–∞–±–ª–æ–Ω–Ω–æ–≥–æ –∫–æ–¥–∞).

3. Celery + Redis

–ü–æ—á–µ–º—É: –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á, —É–º–µ–µ—Ç retry, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ–µ.

–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã: RQ (–ø—Ä–æ—â–µ), FastAPI BackgroundTasks (–Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –¥–æ–ª–≥–∏—Ö –∑–∞–¥–∞—á).

4. Alembic

–ü–æ—á–µ–º—É: –ù–∞—Ç–∏–≤–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–π SQLAlchemy, –±–µ–∑–æ–ø–∞—Å–Ω–∞—è —ç–≤–æ–ª—é—Ü–∏—è —Å—Ö–µ–º—ã.

5. Docker Compose

–ü–æ—á–µ–º—É: –ï–¥–∏–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, —Ç–µ—Å—Ç–æ–≤ –∏ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞.

–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: Kubernetes (–±–æ–ª–µ–µ —Å–ª–æ–∂–Ω–æ–µ –¥–ª—è –Ω–µ–±–æ–ª—å—à–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞).



## ‚öôÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
‚îú‚îÄ‚îÄ app
‚îÇ   ‚îú‚îÄ‚îÄ main.py            # —Å–æ–∑–¥–∞–Ω–∏–µ FastAPI-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ db
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ base.py        # Declarative Base
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database.py    # AsyncSession, SyncSessionLocal
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config.py      # –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Celery –∏ Redis
‚îÇ   ‚îú‚îÄ‚îÄ models             # ORM-–º–æ–¥–µ–ª–∏ (User, Category, Transaction)
‚îÇ   ‚îú‚îÄ‚îÄ schemas            # Pydantic-—Å—Ö–µ–º—ã
‚îÇ   ‚îú‚îÄ‚îÄ services           # –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ routers            # HTTP-–º–∞—Ä—à—Ä—É—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ tasks              # Celery-–∑–∞–¥–∞—á–∏
‚îÇ   ‚îî‚îÄ‚îÄ utils              # –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏ (–ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏, –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã)
‚îú‚îÄ‚îÄ tests
‚îÇ   ‚îú‚îÄ‚îÄ conftest.py        # —Ñ–∏–∫—Å—Ç—É—Ä—ã pytest
‚îÇ   ‚îú‚îÄ‚îÄ test_auth.py       # —Ç–µ—Å—Ç—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ test_categories_*.py  # —Ç–µ—Å—Ç—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ test_transactions_*.py # —Ç–µ—Å—Ç—ã —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ test_export_*.py   # —Ç–µ—Å—Ç—ã —ç–∫—Å–ø–æ—Ä—Ç–∞
‚îÇ   ‚îî‚îÄ‚îÄ docker-compose.test.yml # –æ–∫—Ä—É–∂–µ–Ω–∏–µ –¥–ª—è —Ç–µ—Å—Ç–æ–≤
‚îú‚îÄ‚îÄ docker
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile
‚îÇ   ‚îú‚îÄ‚îÄ entrypoint.sh
‚îÇ   ‚îî‚îÄ‚îÄ docker-compose.yml # –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
‚îú‚îÄ‚îÄ alembic               # –º–∏–≥—Ä–∞—Ü–∏–∏ Alembic
‚îú‚îÄ‚îÄ .github
‚îÇ   ‚îî‚îÄ‚îÄ workflows
‚îÇ       ‚îî‚îÄ‚îÄ ci.yml         # GitHub Actions CI/CD
‚îú‚îÄ‚îÄ README.md
‚îî‚îÄ‚îÄ .env.example
```

---

## üî¨ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. **–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤** (–ª–æ–∫–∞–ª—å–Ω–æ –±–µ–∑ Docker):

   ```bash
   pytest -v
   ```

2. **–ß–µ—Ä–µ–∑ Docker Compose**:

   ```bash
   docker-compose -f tests/docker-compose.test.yml up --build --abort-on-container-exit
   docker-compose -f tests/docker-compose.test.yml down
   ```

---

## üì¶ CI/CD

* **GitHub Actions**: –ø—Ä–∏ –ø—É—à–µ –≤ `main` –∏–ª–∏ PR –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —Ç–µ—Å—Ç—ã, –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–æ–≤ ‚Äî –¥–µ–ø–ª–æ–π –æ–±—Ä–∞–∑–æ–≤.
* **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ Docker layers** —É—Å–∫–æ—Ä—è–µ—Ç —Å–±–æ—Ä–∫—É.
* **–ú–∏–≥—Ä–∞—Ü–∏–∏** Alembic –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤.

---

## ‚ùì –ö–∞–∫ –≤–Ω–µ—Å—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è

1. –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É –æ—Ç `main`: `git checkout -b feature/your-feature`
2. –°–¥–µ–ª–∞–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è, –¥–æ–±–∞–≤—å—Ç–µ —Ç–µ—Å—Ç—ã.
3. –û—Ç–∫—Ä–æ–π—Ç–µ PR, –¥–æ–∂–¥–∏—Ç–µ—Å—å –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è CI –∏ —Ä–µ–≤—å—é.

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT ¬© MrMrMops
